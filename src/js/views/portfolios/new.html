<!DOCTYPE html>

<h1>Create portfolio</h1>

<form  ng-submit="portfoliosNew.create()" name="portfoliosNew.portfolioForm" novalidate ng-hide="portfoliosNew.portfolio.id">

  <div class="field">
    <label class="label" for="name">Name</label>
    <input type="text" id="name" name="name"
    ng-model="portfoliosNew.portfolio.name"
    placeholder="e.g. Emerging Markets" required>
  </div>

  <div ng-messages="portfoliosNew.portfolioForm.name.$error" ng-show="portfoliosNew.portfolioForm.$submitted || portfoliosNew.portfolioForm.name.$touched">
    <div ng-message="required" class="help is-danger">You forgot to enter the name
    </div>
  </div>

  <div class="field">
    <p class="control">
      <input type="submit" class="button rounded-input" value="Create">
    </p>
  </div>

</form>



<div ng-show="portfoliosNew.portfolio.id">
  <h1>{{ portfoliosNew.portfolio.name }}</h1>

  <form ng-submit="portfoliosNew.getComps()">
    <label>Ticker search</label>
    <input type="text" ng-model="portfoliosNew.q" placeholder="Company name">
    <input type="submit" value="Search">
  </form>


  <div ng-repeat="stock in portfoliosNew.companyInfo.data">

    {{ stock.security_name }}
    {{ stock.ticker }}
    {{ stock.security_type }}
    {{ stock.market_sector }}
    {{ stock.stock_exchange }}

  </div>



  <form ng-submit="portfoliosNew.searchTicker()">
    <input type="text" ng-model="portfoliosNew.ticker" placeholder="Ticker">
    <input type="submit" value="Search">
  </form>


  <div>

    {{ portfoliosNew.tickerInfo.name }}
    {{ portfoliosNew.tickerInfo.ticker}}
    {{ portfoliosNew.tickerInfo.stock_exchange }}
    {{ portfoliosNew.tickerInfo.short_description }}

    <input type="number" name="shares" value="" ng-model="portfoliosNew.stock.shares">
    <button ng-click="portfoliosNew.addStock(ticker)">Add stock</button>

  </div>

</div>

<h2>Stocks</h2>
<div ng-repeat="stock in portfoliosNew.portfolio.stocks">
  <p>{{ stock.name }}</p>
  <p>{{ stock.ticker }}</p>
  <p>{{ stock.shares }}</p>
  <p>{{ stock.sector }}</p>
  <p>{{ stock.open }}</p>
  <p>{{ stock.close }}</p>
  <p>{{ stock.volume }}</p>
</div>
